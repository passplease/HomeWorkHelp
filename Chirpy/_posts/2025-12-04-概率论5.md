---
title: 协方差和例题
author: me
date: 2025-12-04 13:03:00 +0800
description: 什么是协方差，方差、均值、协方差的例题
categories: [概率论]
math: true
tags: [概率论,题目分享,经典题型]
---

今天我们来学习协方差，然后通过两个例子（一个离散型，一个连续型）来串讲均值、方差和协方差的计算，帮助大家更好的掌握这两个概念。

### 协方差 (Covariance)

协方差用于度量两个随机变量的联合变化关系。它表示的是 $X$ 和 $Y$ 的协同关系。

- **定义**：
$$ Cov(X, Y) = E[(X - E(X))(Y - E(Y))] $$

- **常用计算公式**：
$$ Cov(X, Y) = E(XY) - E(X)E(Y) $$

- **协方差的意义**：
  - **$Cov(X, Y) > 0$**：表示 $X$ 和 $Y$ 倾向于向同一个方向变化（正相关）。一个变量大于其均值时，另一个也倾向于大于其均值。
  - **$Cov(X, Y) < 0$**：表示 $X$ 和 $Y$ 倾向于向相反的方向变化（负相关）。一个变量大于其均值时，另一个倾向于小于其均值。
  - **$Cov(X, Y) = 0$**：表示 $X$ 和 $Y$ 是不相关的。**注意**：不相关不等于相互独立。相互独立一定不相关，但不相关不一定相互独立。

- **$E(XY)$ 的计算**：
  - **离散型**：$E(XY) = \sum_{i} \sum_{j} x_i y_j P(X=x_i, Y=y_j)$，其中 $P(X=x_i, Y=y_j)$ 是联合概率分布。
  - **连续型**：$E(XY) = \int_{-\infty}^{+\infty} \int_{-\infty}^{+\infty} xy f(x, y) dx dy$，其中 $f(x, y)$ 是联合概率密度函数。

---

### 计算例题

#### 例题1：离散型随机变量

假设有两个随机变量 $X$ 和 $Y$，它们的联合概率分布如下表所示：

| | Y=0 | Y=1 |
| :--- | :---: | :---: |
| **X=1** | 0.1 | 0.4 |
| **X=2** | 0.3 | 0.2 |

**求解**：$E(X)$, $E(Y)$, $D(X)$, $D(Y)$ 和 $Cov(X, Y)$。

**解答步骤**：

1.  **求边缘概率分布**
    - $P(X=1) = P(X=1, Y=0) + P(X=1, Y=1) = 0.1 + 0.4 = 0.5$
    - $P(X=2) = P(X=2, Y=0) + P(X=2, Y=1) = 0.3 + 0.2 = 0.5$
    - $P(Y=0) = P(X=1, Y=0) + P(X=2, Y=0) = 0.1 + 0.3 = 0.4$
    - $P(Y=1) = P(X=1, Y=1) + P(X=2, Y=1) = 0.4 + 0.2 = 0.6$

2.  **求均值 (期望)**
    - $E(X) = \sum x_i P(X=x_i) = 1 \times 0.5 + 2 \times 0.5 = 1.5$
    - $E(Y) = \sum y_j P(Y=y_j) = 0 \times 0.4 + 1 \times 0.6 = 0.6$

3.  **求方差**
    - 先求 $E(X^2)$ 和 $E(Y^2)$:
      - $E(X^2) = \sum x_i^2 P(X=x_i) = 1^2 \times 0.5 + 2^2 \times 0.5 = 0.5 + 2 = 2.5$
      - $E(Y^2) = \sum y_j^2 P(Y=y_j) = 0^2 \times 0.4 + 1^2 \times 0.6 = 0.6$
    - 计算方差 $D(X)$ 和 $D(Y)$:
      - $D(X) = E(X^2) - [E(X)]^2 = 2.5 - (1.5)^2 = 2.5 - 2.25 = 0.25$
      - $D(Y) = E(Y^2) - [E(Y)]^2 = 0.6 - (0.6)^2 = 0.6 - 0.36 = 0.24$

4.  **求协方差**
    - 先求 $E(XY)$:
      - $E(XY) = \sum_{i} \sum_{j} x_i y_j P(X=x_i, Y=y_j)$
      - $= (1)(0)(0.1) + (1)(1)(0.4) + (2)(0)(0.3) + (2)(1)(0.2)$
      - $= 0 + 0.4 + 0 + 0.4 = 0.8$
    - 计算协方差 $Cov(X, Y)$:
      - $Cov(X, Y) = E(XY) - E(X)E(Y) = 0.8 - (1.5)(0.6) = 0.8 - 0.9 = -0.1$

**结论**：$E(X)=1.5$, $D(X)=0.25$, $E(Y)=0.6$, $D(Y)=0.24$, $Cov(X,Y)=-0.1$。协方差为负，说明 $X$ 和 $Y$ 存在一定的负相关关系。

---

#### 例题2：连续型随机变量

设二维随机变量 $(X, Y)$ 的联合概率密度函数为：
$$ f(x, y) = \begin{cases} x+y, & 0 \le x \le 1, 0 \le y \le 1 \\ 0, & \text{其他} \end{cases} $$
**求解**：$E(X)$, $D(X)$ 和 $Cov(X, Y)$。

**解答步骤**：

1.  **求边缘概率密度函数**
    - $f_X(x) = \int_{-\infty}^{+\infty} f(x,y) dy = \int_0^1 (x+y) dy = [xy + \frac{y^2}{2}]_0^1 = x + \frac{1}{2}$  ($0 \le x \le 1$)
    - $f_Y(y) = \int_{-\infty}^{+\infty} f(x,y) dx = \int_0^1 (x+y) dx = [\frac{x^2}{2} + xy]_0^1 = \frac{1}{2} + y$  ($0 \le y \le 1$)

2.  **求均值 (期望)**
    - $E(X) = \int_0^1 x f_X(x) dx = \int_0^1 x(x+\frac{1}{2}) dx = \int_0^1 (x^2 + \frac{x}{2}) dx = [\frac{x^3}{3} + \frac{x^2}{4}]_0^1 = \frac{1}{3} + \frac{1}{4} = \frac{7}{12}$
    - 由于对称性，$E(Y) = \frac{7}{12}$。

3.  **求方差**
    - 先求 $E(X^2)$:
      - $E(X^2) = \int_0^1 x^2 f_X(x) dx = \int_0^1 x^2(x+\frac{1}{2}) dx = \int_0^1 (x^3 + \frac{x^2}{2}) dx = [\frac{x^4}{4} + \frac{x^3}{6}]_0^1 = \frac{1}{4} + \frac{1}{6} = \frac{5}{12}$
    - 计算方差 $D(X)$:
      - $D(X) = E(X^2) - [E(X)]^2 = \frac{5}{12} - (\frac{7}{12})^2 = \frac{60}{144} - \frac{49}{144} = \frac{11}{144}$

4.  **求协方差**
    - 先求 $E(XY)$:
      - $E(XY) = \int_0^1 \int_0^1 xy f(x,y) dx dy = \int_0^1 \int_0^1 xy(x+y) dx dy$
      - $= \int_0^1 \int_0^1 (x^2y + xy^2) dx dy = \int_0^1 [\frac{x^3y}{3} + \frac{x^2y^2}{2}]_0^1 dy$
      - $= \int_0^1 (\frac{y}{3} + \frac{y^2}{2}) dy = [\frac{y^2}{6} + \frac{y^3}{6}]_0^1 = \frac{1}{6} + \frac{1}{6} = \frac{1}{3}$
    - 计算协方差 $Cov(X, Y)$:
      - $Cov(X, Y) = E(XY) - E(X)E(Y) = \frac{1}{3} - (\frac{7}{12})(\frac{7}{12}) = \frac{48}{144} - \frac{49}{144} = -\frac{1}{144}$

**结论**：$E(X)=7/12$, $D(X)=11/144$, $Cov(X,Y)=-1/144$。